{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nlet lightbox = new SimpleLightbox('.image-card a', { captionsData: \"alt\",}); \n\nconst loadBtn = document.getElementById('loadBtn');\nconst imageContainer = document.getElementById('imageContainer');\nlet currentPage = 1;\nlet currentSearchQuery = '';\n\nconst API_KEY = '42176709-03057e91c34187fd30d01f158';\n\nfunction showLoader() {\n  const loader = document.createElement('div');\n    loader.className = 'loader';\n    imageContainer.appendChild(loader);\n    \n}\n\nfunction hideLoader() {\n  const loader = imageContainer.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nasync function performSearch(searchQuery) {\n    showLoader();\n    currentSearchQuery = searchQuery;\n    currentPage = 1;\n    const imageType = 'photo';\n    const orientation = 'horizontal';\n    const safeSearch = true;\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchQuery,\n        image_type: imageType,\n        orientation: orientation,\n        safesearch: safeSearch,\n        per_page: 15,\n        page: currentPage\n    });\n    const URL = `https://pixabay.com/api/?${params}`;\n\n    try {\n        const response = await axios.get(URL);\n        const data = response.data;\n        hideLoader();\n        imageContainer.innerHTML = '';\n\n        const fragment = document.createDocumentFragment();\n\n        if (parseInt(data.totalHits) > 0) {\n            data.hits.forEach(hit => {\n                const cardContainer = document.createElement('li');\n                cardContainer.className = 'image-card';\n\n                const imgElement = document.createElement('img');\n                imgElement.src = hit.webformatURL;\n                imgElement.alt = hit.tags;\n\n                const galleryLink = document.createElement('a');\n                galleryLink.href = hit.largeImageURL;\n                galleryLink.appendChild(imgElement);\n\n                const detailsContainer = document.createElement('div');\n                detailsContainer.className = 'image-details';\n\n                const likesElement = document.createElement('p');\n                likesElement.textContent = `Likes ${hit.likes}`;\n\n                const viewsElement = document.createElement('p');\n                viewsElement.textContent = `Views ${hit.views}`;\n\n                const commentsElement = document.createElement('p');\n                commentsElement.textContent = `Comments ${hit.comments}`;\n\n                const downloadsElement = document.createElement('p');\n                downloadsElement.textContent = `Downloads ${hit.downloads}`;\n\n                detailsContainer.appendChild(likesElement);\n                detailsContainer.appendChild(viewsElement);\n                detailsContainer.appendChild(commentsElement);\n                detailsContainer.appendChild(downloadsElement);\n\n                cardContainer.appendChild(galleryLink);\n                cardContainer.appendChild(detailsContainer);\n\n                fragment.appendChild(cardContainer);\n            });\n\n            imageContainer.appendChild(fragment);\n            lightbox.refresh();\n            loadBtn.style.display = 'block';\n        } else {\n            iziToast.error({\n                message: 'Please enter a valid search query.',\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n        hideLoader();\n        console.error('Error during fetch:', error.message);\n    }\n}\n\nasync function loadMoreImages() {\n    currentPage++;\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: currentSearchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currentPage\n    });\n    const URL = `https://pixabay.com/api/?${params}`;\n\n    try {\n        const response = await axios.get(URL);\n        const data = response.data;\nhideLoader();\n        const fragment = document.createDocumentFragment();\n\n        if (parseInt(data.totalHits) > 0) {\n            data.hits.forEach(hit => {\n                const cardContainer = document.createElement('li');\n                cardContainer.className = 'image-card';\n\n                const imgElement = document.createElement('img');\n                imgElement.src = hit.webformatURL;\n                imgElement.alt = hit.tags;\n\n                const galleryLink = document.createElement('a');\n                galleryLink.href = hit.largeImageURL;\n                galleryLink.appendChild(imgElement);\n\n                const detailsContainer = document.createElement('div');\n                detailsContainer.className = 'image-details';\n\n                const likesElement = document.createElement('p');\n                likesElement.textContent = `Likes ${hit.likes}`;\n\n                const viewsElement = document.createElement('p');\n                viewsElement.textContent = `Views ${hit.views}`;\n\n                const commentsElement = document.createElement('p');\n                commentsElement.textContent = `Comments ${hit.comments}`;\n\n                const downloadsElement = document.createElement('p');\n                downloadsElement.textContent = `Downloads ${hit.downloads}`;\n\n                detailsContainer.appendChild(likesElement);\n                detailsContainer.appendChild(viewsElement);\n                detailsContainer.appendChild(commentsElement);\n                detailsContainer.appendChild(downloadsElement);\n\n                cardContainer.appendChild(galleryLink);\n                cardContainer.appendChild(detailsContainer);\n\n                fragment.appendChild(cardContainer);\n            });\n\n            imageContainer.appendChild(fragment);\n            lightbox.refresh();\n         \n            if (currentPage * 15 >= parseInt(data.totalHits)) {\n                document.getElementById('loadBtn').style.display = 'none';\n                iziToast.error({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                });\n            }\n\n            const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n});\n        }\n    } catch (error) {\n        hideLoader();\n        console.error('Error loading more images:', error.message);\n    }\n}\n\nloadBtn.addEventListener('click', loadMoreImages);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    document.getElementById('searchForm').addEventListener('submit', function (event) {\n        event.preventDefault();\n        const searchInputValue = document.getElementById('searchInput').value;\n        if (searchInputValue.trim() !== '') {\n            performSearch(searchInputValue);\n            loadBtn.style.display = 'none';\n        } else {\n            iziToast.error({\n                message: 'Please enter a valid search query.',\n                position: 'topRight',\n            });\n        }\n\n        event.target.reset();\n    });\n    loadBtn.style.display = 'none';\n});\n"],"names":["lightbox","SimpleLightbox","loadBtn","imageContainer","currentPage","currentSearchQuery","API_KEY","showLoader","loader","hideLoader","performSearch","searchQuery","imageType","orientation","safeSearch","URL","data","axios","fragment","hit","cardContainer","imgElement","galleryLink","detailsContainer","likesElement","viewsElement","commentsElement","downloadsElement","iziToast","error","loadMoreImages","cardHeight","event","searchInputValue"],"mappings":"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"}